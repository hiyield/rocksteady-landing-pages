<!--
  templateType: blog_post
  isAvailableForNewContent: true
  label: Boilerplate - blog post
  screenshotPath: ../images/template-previews/blog-post.png
-->
{% set template_css = "../../css/templates/blog.css" %}
{% extends "./layouts/base.html" %}

{% block body %}
<div class="body-container body-container--blog-post">

  {# Blog post #}

  <div class="content-wrapper">
    <article class="hy-blog-post">
      <h1 class="hy-blog-post__title hy-gradient-purple-blue">{{ content.name|sanitize_html }}</h1>
      <!-- Featured Image + Key Takeaways -->

      <div class="hy-blog-post__key-takeaways">

        <div class="hy-image-container">
          <img src="{{ content.featured_image }}" />
        </div>

        <!-- Key Takeaways Block -->
      </div>

      <div class="hy-blog-post__meta">
        <div class="hy-author-date-container">
          <time datetime="{{ content.publish_date }}" class="blog-post__timestamp"> 
            {{ content.publishDate|datetimeformat('%e %B %Y') }} 
          </time>

          |
        
          <span>
            By
            <a href="{{ blog_author_url(group.id, content.blog_post_author.slug)|escape_url }}" rel="author">
              {{ content.blog_post_author.display_name|escape_html }}
            </a>
          </span>
        </div>

        <div class="hy-share-container">
          <span>Share:</span>

          {% module "social-follow"
            path="../../modules/social-follow",
            label="Social Sharing"
          %}

        </div>

        <div class="hy-seperator"></div>
      </div>


      <div class="hy-blog-post__body">
        {{ content.post_body }}
      </div>

    </article>
  </div>

  {# Recent posts listing #}

  {# This macro is used to format each recent post card and gets passed to the related_blog_posts HubL tag below #}

  {% macro related_posts(post, count, total) %}
    {% if count == 1 %}
      <section class="blog-related-posts">
        <div class="content-wrapper">
          <h2>Read On</h2>
          <div class="blog-related-posts__list">
    {% endif %}
            <article class="blog-related-posts__post" aria-label="Blog post summary: {{ post.name|escape_attr }}">
              {% if post.featured_image %}
                <a class="blog-related-posts__post-image-wrapper" href="{{ post.absolute_url|escape_url }}" aria-label="{% if post.featured_image_alt_text %} Featured image: {{ post.featured_image_alt_text|escape_attr }} - {% endif %}Read full post: {{ post.name|escape_attr }}">
                  <img class="blog-related-posts__image" src="{{ post.featured_image|escape_url }}" loading="lazy" width="352" alt="{{ post.featured_image_alt_text|escape_attr }}">
                </a>
              {% endif %}
              <div class="blog-related-posts__content">
                <h3 class="blog-related-posts__title">
                  <a class="blog-related-posts__title-link" href="{{ post.absolute_url|escape_url }}">{{ post.name|escape_html }}</a></h3>
                {{ post.post_summary|truncatehtml(100)|sanitize_html("STRIP") }}
              </div>
            </article>
      {% if count == total %}
          </div>
        </div>
      </section>
    {% endif %}
  {% endmacro %}

  {% related_blog_posts
    limit=3,
    no_wrapper=True,
    post_formatter="related_posts"
  %}

</div>
{% endblock body %}
